{"version":3,"file":"commonHelpers.js","sources":["../src/img/icon.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__65a791c1__\"","import axios from \"axios\";\n\nexport async function fetchPhotos(getValue, amount = 15, page = 1) {\n\n    const resp = await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n          key: \"42554621-2fa4a31fb360b145b3c1613f4\",\n          q: getValue,\n          image_type: \"photo\",\n          orientation: \"horizontal\",\n          safesearch: true,\n          page: page,\n          per_page: amount,\n        }\n    });\n\n    return resp.data\n}","export function renderPhotos(array) {\n    return array\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n            return `<li class=\"gallery-item\">\n                     <a href=\"${largeImageURL}\">\n                        <img src=\"${webformatURL}\" alt=\"${tags}\"/>\n                        <div class=\"info-box\">\n                           <p class=\"info\"><b>Likes</b> ${likes}</p>\n                           <p class=\"info\"><b>Views</b> ${views}</p>\n                           <p class=\"info\"><b>Comments</b> ${comments}</p>\n                           <p class=\"info\"><b>Downloads</b> ${downloads}</p>\n                     </div>\n                    </a>\n                   </li>`;\n        })\n         .join(\"\");\n    \n}","'use strict';\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport icon from \"./img/icon.svg\";\n\nimport { fetchPhotos } from './js/pixabay-api.js';\nimport { renderPhotos } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('form');\nconst gallery = document.querySelector('ul.gallery');\nconst loading = document.querySelector('span.loader');\nconst fetchPhotosBtn = document.querySelector('[data-action=\"load-more\"]');\n\nlet page;\nlet getValue;\n\nloading.classList.remove(\"loader\");\nfetchPhotosBtn.classList.add(\"is-hidden\");\n\n const lightbox = new SimpleLightbox(\".gallery a\", {\n       captionsData: \"alt\",\n       captionDelay: 100,\n });\n\nasync function handleSearchSubmit(event) {\n    event.preventDefault(); \n    gallery.innerHTML = \"\";\n    fetchPhotosBtn.classList.add(\"is-hidden\");\n    getValue = event.currentTarget.elements.search.value.trim();\n\n    if (getValue !== \"\") {\n        loading.classList.add(\"loader\");\n        page = 1;\n        try {\n            const data = await fetchPhotos(getValue, 15, page);\n            if (data.totalHits !== 0) {\n                  loading.classList.remove(\"loader\");\n                  gallery.innerHTML = renderPhotos(data.hits);\n                  fetchPhotosBtn.classList.remove(\"is-hidden\");\n                  lightbox.refresh();\n            } else {\n                handleNoResults();\n                }\n            }\n        catch (error) {\n            handleFetchError(error);\n        }\n    };\n    searchForm.reset();\n}\n\nasync function onloadMore() {\n    loading.classList.add(\"loader\");\n    fetchPhotosBtn.classList.add(\"is-hidden\");\n    page += 1;\n\n    try {\n        const data = await fetchPhotos(getValue, 15, page);\n        loading.classList.remove(\"loader\");\n        const newPhotosHTML = renderPhotos(data.hits);\n        gallery.insertAdjacentHTML('beforeend', newPhotosHTML);\n        fetchPhotosBtn.classList.remove(\"is-hidden\");\n        fetchPhotosBtn.parentNode.insertBefore(loading, fetchPhotosBtn.nextSibling);\n        lightbox.refresh();\n        lastPageResultInfo(data.totalHits);\n        slowScroll();\n    } catch (error) {\n        handleFetchError(error);\n    }\n}\n\nasync function lastPageResultInfo(totalHits) {\n    if (totalHits <= page * 15) {\n        fetchPhotosBtn.classList.add(\"is-hidden\");\n        showEndOfResultsMessage();\n    }\n}\n\nfunction slowScroll() {\n    const elem = document.querySelector(\".gallery-item\");\n    const rect = elem.getBoundingClientRect();\n    window.scrollBy({\n        top: rect.height * 3,\n        behavior: \"smooth\",\n    });\n}\n\n\nfunction handleNoResults() {\n    iziToast.show({\n        iconUrl: icon,\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        messageColor: \"#FFFFFF\",\n        color: \"#FF6868\",\n        position: \"topRight\",\n        progressBarColor: \"#FFFFFF\",\n        close: false,\n        timeout: 3000\n    });\n    loading.classList.remove(\"loader\");\n}\n\nfunction handleFetchError(error) {\n    console.error(error);\n    iziToast.error({\n        iconUrl: icon,\n        message: `Sorry, there was an unexpected issue running your request!`,\n        messageColor: \"#FFFFFF\",\n        color: \"#FF6868\",\n        position: \"topRight\",\n        progressBarColor: \"#FFFFFF\",\n        close: false,\n        timeout: 3000\n    });\n    loading.classList.remove(\"loader\");\n}\n\nfunction showEndOfResultsMessage() {\n    iziToast.show({\n        iconUrl: icon,\n        message: `We're sorry, but you've reached the end of search results`,\n        messageColor: \"#FFFFFF\",\n        color: \"#1E81B0\",\n        position: \"topRight\",\n        progressBarColor: \"#FFFFFF\",\n        close: false,\n        timeout: 3000\n    });\n}\n\nsearchForm.addEventListener(\"submit\", handleSearchSubmit);\nfetchPhotosBtn.addEventListener(\"click\", onloadMore);"],"names":["icon","fetchPhotos","getValue","amount","page","axios","renderPhotos","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","gallery","loading","fetchPhotosBtn","lightbox","SimpleLightbox","handleSearchSubmit","event","data","handleNoResults","error","handleFetchError","onloadMore","newPhotosHTML","lastPageResultInfo","slowScroll","totalHits","showEndOfResultsMessage","rect","iziToast"],"mappings":"owBAAA,MAAeA,EAAA,0CCER,eAAeC,EAAYC,EAAUC,EAAS,GAAIC,EAAO,EAAG,CAc/D,OAZa,MAAMC,EAAM,IAAI,2BAA4B,CACrD,OAAQ,CACN,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAME,EACN,SAAUD,CACX,CACT,CAAK,GAEW,IAChB,CCjBO,SAASG,EAAaC,EAAO,CAChC,OAAOA,EACF,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KACxD;AAAA,gCACaL,CAAa;AAAA,oCACTD,CAAY,UAAUE,CAAI;AAAA;AAAA,0DAEJC,CAAK;AAAA,0DACLC,CAAK;AAAA,6DACFC,CAAQ;AAAA,8DACPC,CAAS;AAAA;AAAA;AAAA,yBAI9D,EACC,KAAK,EAAE,CAEjB,CCJA,MAAMC,EAAa,SAAS,cAAc,MAAM,EAC1CC,EAAU,SAAS,cAAc,YAAY,EAC7CC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAiB,SAAS,cAAc,2BAA2B,EAEzE,IAAId,EACAF,EAEJe,EAAQ,UAAU,OAAO,QAAQ,EACjCC,EAAe,UAAU,IAAI,WAAW,EAEvC,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAC5C,aAAc,MACd,aAAc,GACrB,CAAE,EAEF,eAAeC,EAAmBC,EAAO,CAMrC,GALAA,EAAM,eAAc,EACpBN,EAAQ,UAAY,GACpBE,EAAe,UAAU,IAAI,WAAW,EACxChB,EAAWoB,EAAM,cAAc,SAAS,OAAO,MAAM,OAEjDpB,IAAa,GAAI,CACjBe,EAAQ,UAAU,IAAI,QAAQ,EAC9Bb,EAAO,EACP,GAAI,CACA,MAAMmB,EAAO,MAAMtB,EAAYC,EAAU,GAAIE,CAAI,EAC7CmB,EAAK,YAAc,GACjBN,EAAQ,UAAU,OAAO,QAAQ,EACjCD,EAAQ,UAAYV,EAAaiB,EAAK,IAAI,EAC1CL,EAAe,UAAU,OAAO,WAAW,EAC3CC,EAAS,QAAO,GAElBK,GAEH,OACEC,EAAO,CACVC,EAAiBD,CAAK,CACzB,CACT,CACIV,EAAW,OACf,CAEA,eAAeY,GAAa,CACxBV,EAAQ,UAAU,IAAI,QAAQ,EAC9BC,EAAe,UAAU,IAAI,WAAW,EACxCd,GAAQ,EAER,GAAI,CACA,MAAMmB,EAAO,MAAMtB,EAAYC,EAAU,GAAIE,CAAI,EACjDa,EAAQ,UAAU,OAAO,QAAQ,EACjC,MAAMW,EAAgBtB,EAAaiB,EAAK,IAAI,EAC5CP,EAAQ,mBAAmB,YAAaY,CAAa,EACrDV,EAAe,UAAU,OAAO,WAAW,EAC3CA,EAAe,WAAW,aAAaD,EAASC,EAAe,WAAW,EAC1EC,EAAS,QAAO,EAChBU,EAAmBN,EAAK,SAAS,EACjCO,GACH,OAAQL,EAAO,CACZC,EAAiBD,CAAK,CACzB,CACL,CAEA,eAAeI,EAAmBE,EAAW,CACrCA,GAAa3B,EAAO,KACpBc,EAAe,UAAU,IAAI,WAAW,EACxCc,IAER,CAEA,SAASF,GAAa,CAElB,MAAMG,EADO,SAAS,cAAc,eAAe,EACjC,wBAClB,OAAO,SAAS,CACZ,IAAKA,EAAK,OAAS,EACnB,SAAU,QAClB,CAAK,CACL,CAGA,SAAST,GAAkB,CACvBU,EAAS,KAAK,CACV,QAASlC,EACT,QAAS,2EACT,aAAc,UACd,MAAO,UACP,SAAU,WACV,iBAAkB,UAClB,MAAO,GACP,QAAS,GACjB,CAAK,EACDiB,EAAQ,UAAU,OAAO,QAAQ,CACrC,CAEA,SAASS,EAAiBD,EAAO,CAC7B,QAAQ,MAAMA,CAAK,EACnBS,EAAS,MAAM,CACX,QAASlC,EACT,QAAS,6DACT,aAAc,UACd,MAAO,UACP,SAAU,WACV,iBAAkB,UAClB,MAAO,GACP,QAAS,GACjB,CAAK,EACDiB,EAAQ,UAAU,OAAO,QAAQ,CACrC,CAEA,SAASe,GAA0B,CAC/BE,EAAS,KAAK,CACV,QAASlC,EACT,QAAS,4DACT,aAAc,UACd,MAAO,UACP,SAAU,WACV,iBAAkB,UAClB,MAAO,GACP,QAAS,GACjB,CAAK,CACL,CAEAe,EAAW,iBAAiB,SAAUM,CAAkB,EACxDH,EAAe,iBAAiB,QAASS,CAAU"}