{"version":3,"file":"commonHelpers.js","sources":["../src/img/icon.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__65a791c1__\"","import axios from \"axios\";\n\nexport async function fetchPhotos(getValue, amount = 15, page = 1) {\n\n    const resp = await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n          key: \"42554621-2fa4a31fb360b145b3c1613f4\",\n          q: getValue,\n          image_type: \"photo\",\n          orientation: \"horizontal\",\n          safesearch: true,\n          page: page,\n          per_page: amount,\n        }\n    });\n\n    return resp.data\n}","export function renderPhotos(array) {\n    return array\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n            return `<li class=\"gallery-item\">\n                     <a href=\"${largeImageURL}\">\n                        <img src=\"${webformatURL}\" alt=\"${tags}\"/>\n                        <div class=\"info-box\">\n                           <p class=\"info\"><b>Likes</b> ${likes}</p>\n                           <p class=\"info\"><b>Views</b> ${views}</p>\n                           <p class=\"info\"><b>Comments</b> ${comments}</p>\n                           <p class=\"info\"><b>Downloads</b> ${downloads}</p>\n                     </div>\n                    </a>\n                   </li>`;\n        })\n         .join(\"\");\n    \n}","'use strict';\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport icon from \"./img/icon.svg\";\n\nimport { fetchPhotos } from './js/pixabay-api.js';\nimport { renderPhotos } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('form');\nconst gallery = document.querySelector('ul.gallery');\nconst loading = document.querySelector('span.loader');\nconst fetchPhotosBtn = document.querySelector('[data-action=\"load-more\"]');\n\nlet page;\nlet getValue;\n\nhideLoader();\nhideButton();\n\n const lightbox = new SimpleLightbox(\".gallery a\", {\n       captionsData: \"alt\",\n       captionDelay: 100,\n });\n\nasync function handleSearchSubmit(event) {\n    event.preventDefault(); \n    gallery.innerHTML = \"\";\n    console.clear();\n    hideButton();\n    getValue = event.currentTarget.elements.search.value.trim();\n\n    if (getValue !== \"\") {\n        showLoader();\n        page = 1;\n        try {\n            const data = await fetchPhotos(getValue, 15, page);\n            if (data.totalHits !== 0) {\n                hideLoader();\n                  gallery.innerHTML = renderPhotos(data.hits);\n                  showButton();\n                  lightbox.refresh();\n            } else {\n                handleNoResults();\n            }\n            lastPageResultInfo(data.totalHits);\n            }\n        catch (error) {\n            handleFetchError(error);\n        }\n    };\n    searchForm.reset();\n}\n\nasync function onloadMore() {\n    showLoader();\n    hideButton();\n    page += 1;\n\n    try {\n        const data = await fetchPhotos(getValue, 15, page);\n        hideLoader();\n        const newPhotosHTML = renderPhotos(data.hits);\n        gallery.insertAdjacentHTML('beforeend', newPhotosHTML);\n        showButton();\n        fetchPhotosBtn.parentNode.insertBefore(loading, fetchPhotosBtn.nextSibling);\n        lightbox.refresh();\n        lastPageResultInfo(data.totalHits);\n        smoothScroll();\n    } catch (error) {\n        handleFetchError(error);\n    }\n}\n\nasync function lastPageResultInfo(totalHits) {\n    if (totalHits <= page * 15) {\n        hideButton();\n        showEndOfResultsMessage();\n    }\n}\n\nfunction smoothScroll() {\n    const elem = document.querySelector(\".gallery-item\");\n    const rect = elem.getBoundingClientRect();\n    window.scrollBy({\n        top: rect.height * 3,\n        behavior: \"smooth\",\n    });\n}\n\nfunction showButton() {\n    fetchPhotosBtn.classList.remove(\"is-hidden\");\n}\n\nfunction hideButton() {\n    fetchPhotosBtn.classList.add(\"is-hidden\");\n}\n\nfunction showLoader() {\n    loading.classList.add(\"loader\");\n}\n\nfunction hideLoader() {\n    loading.classList.remove(\"loader\");\n}\n\n\nfunction handleNoResults() {\n    iziToast.show({\n        iconUrl: icon,\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        messageColor: \"#FFFFFF\",\n        color: \"#FF6868\",\n        position: \"topRight\",\n        progressBarColor: \"#FFFFFF\",\n        close: false,\n        timeout: 3000\n    });\n    hideLoader();\n}\n\nfunction handleFetchError() {\n    iziToast.error({\n        iconUrl: icon,\n        message: `Sorry, there was an unexpected issue running your request!`,\n        messageColor: \"#FFFFFF\",\n        color: \"#FF6868\",\n        position: \"topRight\",\n        progressBarColor: \"#FFFFFF\",\n        close: false,\n        timeout: 3000\n    });\n    hideLoader()\n}\n\nfunction showEndOfResultsMessage() {\n    iziToast.show({\n        iconUrl: icon,\n        message: `We're sorry, but you've reached the end of search results`,\n        messageColor: \"#FFFFFF\",\n        color: \"#1E81B0\",\n        position: \"topRight\",\n        progressBarColor: \"#FFFFFF\",\n        close: false,\n        timeout: 3000\n    });\n}\n\nsearchForm.addEventListener(\"submit\", handleSearchSubmit);\nfetchPhotosBtn.addEventListener(\"click\", onloadMore);"],"names":["icon","fetchPhotos","getValue","amount","page","axios","renderPhotos","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","gallery","loading","fetchPhotosBtn","hideLoader","hideButton","lightbox","SimpleLightbox","handleSearchSubmit","event","showLoader","data","showButton","handleNoResults","lastPageResultInfo","handleFetchError","onloadMore","newPhotosHTML","smoothScroll","totalHits","showEndOfResultsMessage","rect","iziToast"],"mappings":"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"}